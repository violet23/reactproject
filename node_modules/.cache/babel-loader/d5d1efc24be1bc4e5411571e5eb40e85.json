{"ast":null,"code":"import _classCallCheck from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/aishanliu/Desktop/yepfrontend/src/Components/SampleStats.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport CardActions from '@material-ui/core/CardActions';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Button from '@material-ui/core/Button';\nimport { Card } from '@material-ui/core';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport UnPublishIcon from '@material-ui/icons/Lock';\nimport PublishIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/EditOutlined';\nimport { withSnackbar } from 'notistack'; // retrieve app configuration settings\n\nimport Config from '../Config';\n\nvar styles = function styles(theme) {\n  return {\n    fullList: {\n      width: 'auto',\n      height: '100%',\n      background: \"#fafafa\"\n    },\n    table: {\n      width: \"auto\"\n    },\n    borderLine: {\n      border: \"1px solid \".concat(theme.palette.divider),\n      // borderLeft: `2px solid ${theme.palette.divider}`,\n      padding: \"\".concat(theme.spacing.unit, \"px \").concat(theme.spacing.unit * 2, \"px\")\n    },\n    statsContainer: {\n      padding: \"\".concat(theme.spacing.unit, \"px \").concat(theme.spacing.unit * 5, \"px\"),\n      marginTop: 2\n    },\n    rightIcon: {\n      marginLeft: theme.spacing.unit,\n      fontSize: 20\n    },\n    tableHeader: {\n      color: '#fff',\n      backgroundColor: \"#5c6bc0\",\n      border: \"2px solid #5c6bc0\"\n    },\n    publicColor: {\n      color: \"#43a047\"\n    },\n    privateColor: {\n      color: \"#dd2c00\"\n    }\n  };\n};\n\nvar SampleStats =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SampleStats, _React$Component);\n\n  function SampleStats() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SampleStats);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SampleStats)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      stats: null\n    };\n\n    _this.handleSamplePublication = function (id, value, replicateId) {\n      return function () {\n        // The patchURL should be coming from a config file.\n        var patchURL = Config.settings.apiURL + Config.settings.samplesEndpoint + \"/\" + id;\n        var updateArray = [{\n          \"propName\": \"isPublic\",\n          \"value\": value\n        }]; // console.log(patchURL);\n        // console.log(updateArray);\n        // changing the public status using the state\n\n        var newStats = _this.props.stats.map(function (item) {\n          if (item._id === id) {\n            item.isPublic = value;\n          }\n\n          return item;\n        });\n\n        axios.patch(patchURL, updateArray).then(function (res) {\n          if (res.statusText === \"OK\") {\n            console.log(\"Sucess\", updateArray[0]);\n            value ? _this.props.enqueueSnackbar(replicateId + ' is published', {\n              variant: 'success'\n            }) : _this.props.enqueueSnackbar(replicateId + ' is private', {\n              variant: 'info'\n            });\n\n            _this.setState({\n              stats: newStats\n            });\n          } else {\n            // wondering when this would happen ?\n            console.log(\"Failed\", updateArray[0]);\n            console.log(res);\n\n            _this.props.enqueueSnackbar('ERROR : Check log in the console !', {\n              variant: 'error',\n              autoHideDuration: 2000\n            });\n          }\n        }).catch(function (error) {\n          console.log(\"Unable to update the sample using PATCH\");\n          console.log(error);\n\n          _this.props.enqueueSnackbar(error.message + \" / Server Offline\", {\n            variant: 'error',\n            autoHideDuration: 2000\n          });\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(SampleStats, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var id = 0;\n      var sampleStats = this.props.stats.map(function (item) {\n        id = id + 1; // Status of the sample\n\n        var sampleStatus = item.isPublic ? React.createElement(PublishIcon, {\n          className: classes.publicColor,\n          onClick: _this2.handleSamplePublication(item._id, false, item.sampleId),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }) : React.createElement(UnPublishIcon, {\n          className: classes.privateColor,\n          onClick: _this2.handleSamplePublication(item._id, true, item.sampleId),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        });\n        return React.createElement(Grid, {\n          item: true,\n          key: id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(Card, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(CardContent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          container: true,\n          spacing: 8,\n          direction: \"row\",\n          wrap: \"nowrap\",\n          justify: \"space-between\",\n          className: classes.mainContainer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \" Sample \" + id, React.createElement(Typography, {\n          variant: \"overline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, item.standardGeneName, \" / \", item.featureName), React.createElement(Typography, {\n          variant: \"caption\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, item.alias)), Config.settings.siteAvailability === \"private\" ? React.createElement(Grid, {\n          item: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(Tooltip, {\n          title: \"Edit Sample\",\n          \"aria-label\": \"Edit Sample\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/edit/\" + item._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, React.createElement(EditIcon, {\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }))), React.createElement(Tooltip, {\n          title: \"Publish Sample\",\n          \"aria-label\": \"Publish Sample\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, sampleStatus)) : React.createElement(Grid, {\n          item: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }))), React.createElement(Divider, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }), React.createElement(Grid, {\n          container: true,\n          spacing: 24,\n          direction: \"column\",\n          justify: \"flex-start\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, React.createElement(Grid, {\n          item: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, React.createElement(Table, {\n          className: classes.table,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, React.createElement(TableBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          className: classes.tableHeader,\n          colSpan: 3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"overline\",\n          gutterBottom: true,\n          className: classes.tableHeader,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, \"Meta Information\"))), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, \"Assay\"), React.createElement(TableCell, {\n          align: \"left\",\n          colSpan: 2,\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, item.assayType)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, \"Run ID\"), React.createElement(TableCell, {\n          align: \"left\",\n          colSpan: 2,\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, item.runId)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, \"Sample ID\"), React.createElement(TableCell, {\n          align: \"left\",\n          colSpan: 2,\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, item.sampleId)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, \"Epitope Tag\"), React.createElement(TableCell, {\n          align: \"left\",\n          colSpan: 2,\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, item.epitopeTag)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }, \"Antibody\"), React.createElement(TableCell, {\n          align: \"left\",\n          colSpan: 2,\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212\n          },\n          __self: this\n        }, item.antibody)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, \"Condition\"), React.createElement(TableCell, {\n          align: \"left\",\n          colSpan: 2,\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, item.growthMedia, \" / \", item.treatments)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          className: classes.tableHeader,\n          colSpan: 3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"overline\",\n          gutterBottom: true,\n          className: classes.tableHeader,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }, \"General Stats\"))), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        }, \"Total Sequencing Reads\"), React.createElement(TableCell, {\n          align: \"left\",\n          colSpan: 2,\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, item.totalReads)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, \"Mapped Read count\"), React.createElement(TableCell, {\n          align: \"left\",\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, item.mappedReads), React.createElement(TableCell, {\n          align: \"left\",\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, item.mappedReadPercent)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244\n          },\n          __self: this\n        }, \"Uniquely Mapped Reads\"), React.createElement(TableCell, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247\n          },\n          __self: this\n        }, item.uniquelyMappedReads), React.createElement(TableCell, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248\n          },\n          __self: this\n        }, item.uniquelyMappedPercent)), React.createElement(TableRow, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251\n          },\n          __self: this\n        }, \"DeDuplicated Count\"), React.createElement(TableCell, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }, item.dedupUniquelyMappedReads), React.createElement(TableCell, {\n          className: classes.borderLine,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }, item.deduplicatedPercent)))))))));\n      });\n      return React.createElement(CardContent, {\n        className: classes.fullList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(CardActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        alignItems: \"center\",\n        justify: \"space-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        sm: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Go Back\",\n        \"aria-label\": \"Go Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"small\",\n        color: \"primary\",\n        onClick: this.props.handleBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(ArrowBack, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      })))), React.createElement(Grid, {\n        item: true,\n        sm: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }))), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }), React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        direction: \"row\",\n        justify: \"center\",\n        className: classes.statsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, sampleStats));\n    }\n  }]);\n\n  return SampleStats;\n}(React.Component);\n\nSampleStats.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(withSnackbar(SampleStats));","map":{"version":3,"sources":["/Users/aishanliu/Desktop/yepfrontend/src/Components/SampleStats.js"],"names":["React","axios","Link","PropTypes","withStyles","CardContent","Typography","Divider","Grid","Table","TableBody","TableCell","TableRow","CardActions","ArrowBack","Button","Card","Tooltip","UnPublishIcon","PublishIcon","EditIcon","withSnackbar","Config","styles","theme","fullList","width","height","background","table","borderLine","border","palette","divider","padding","spacing","unit","statsContainer","marginTop","rightIcon","marginLeft","fontSize","tableHeader","color","backgroundColor","publicColor","privateColor","SampleStats","state","stats","handleSamplePublication","id","value","replicateId","patchURL","settings","apiURL","samplesEndpoint","updateArray","newStats","props","map","item","_id","isPublic","patch","then","res","statusText","console","log","enqueueSnackbar","variant","setState","autoHideDuration","catch","error","message","classes","sampleStats","sampleStatus","sampleId","mainContainer","standardGeneName","featureName","alias","siteAvailability","assayType","runId","epitopeTag","antibody","growthMedia","treatments","totalReads","mappedReads","mappedReadPercent","uniquelyMappedReads","uniquelyMappedPercent","dedupUniquelyMappedReads","deduplicatedPercent","handleBack","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport CardActions from '@material-ui/core/CardActions';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Button from '@material-ui/core/Button';\nimport { Card } from '@material-ui/core';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport UnPublishIcon from '@material-ui/icons/Lock';\nimport PublishIcon from '@material-ui/icons/LockOpen';\nimport EditIcon from '@material-ui/icons/EditOutlined';\n\nimport { withSnackbar } from 'notistack';\n\n// retrieve app configuration settings\nimport Config from '../Config';\n\nconst styles = theme => ({\n    fullList: {\n        width: 'auto',\n        height: '100%', \n        background: \"#fafafa\",\n      },\n      table: {\n       width: \"auto\",       \n      },\n      borderLine: {\n        border: `1px solid ${theme.palette.divider}`,\n        // borderLeft: `2px solid ${theme.palette.divider}`,\n        padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\n      },\n      statsContainer:{\n        padding: `${theme.spacing.unit}px ${theme.spacing.unit * 5}px`,\n        marginTop: 2,        \n      },      \n      rightIcon: {\n        marginLeft: theme.spacing.unit,\n        fontSize: 20,\n      },\n      tableHeader:{\n        color: '#fff',\n        backgroundColor: \"#5c6bc0\",\n        border: `2px solid #5c6bc0`,\n      },\n      publicColor:{\n        color: \"#43a047\",\n      },\n      privateColor:{\n        color: \"#dd2c00\",\n      },\n         \n});\n\n\nclass SampleStats extends React.Component {\n  state = {\n    stats : null\n  }\n\n  handleSamplePublication = (id,value,replicateId) => () => {\n    // The patchURL should be coming from a config file.\n    var patchURL = Config.settings.apiURL + Config.settings.samplesEndpoint + \"/\" +id;\n    var updateArray = [{\"propName\": \"isPublic\",\"value\" : value}]\n    // console.log(patchURL);\n    // console.log(updateArray);\n\n    // changing the public status using the state\n    const newStats = this.props.stats.map(item => {\n        \n            if(item._id === id){\n                item.isPublic = value\n            }\n            return item\n        \n    });    \n   \n\n    axios.patch(patchURL,updateArray).then(res =>{\n        if(res.statusText === \"OK\"){\n            console.log(\"Sucess\", updateArray[0]);\n            value ?  \n            this.props.enqueueSnackbar(replicateId + ' is published', { variant: 'success'}): \n            this.props.enqueueSnackbar(replicateId + ' is private', { variant: 'info'}); \n            this.setState({\n                stats : newStats\n            })       \n        }\n        else{\n            // wondering when this would happen ?\n            console.log(\"Failed\", updateArray[0]);\n            console.log(res); \n            this.props.enqueueSnackbar('ERROR : Check log in the console !', { variant: 'error', autoHideDuration: 2000, });                               \n        }         \n    }).catch(error =>{\n        console.log(\"Unable to update the sample using PATCH\");\n        console.log(error);      \n        this.props.enqueueSnackbar(error.message + \" / Server Offline\", { variant: 'error', autoHideDuration: 2000, });\n    });\n  };\n   \n\n  render() {\n    const { classes } = this.props;\n    \n\n    var id = 0;\n    const sampleStats = this.props.stats.map(item =>{\n        id = id + 1;\n\n        // Status of the sample\n        const sampleStatus = item.isPublic ?        \n            <PublishIcon className={classes.publicColor} onClick={this.handleSamplePublication(item._id,false,item.sampleId)}/> : <UnPublishIcon className={classes.privateColor} onClick={this.handleSamplePublication(item._id,true,item.sampleId)}/>;         \n        \n        return (\n            <Grid item key={id}>\n                <Card>\n                    <CardContent>\n                        <Typography variant=\"h5\" gutterBottom  >\n                        <Grid container spacing={8} direction=\"row\" wrap=\"nowrap\" \n                        justify=\"space-between\" className={classes.mainContainer}> \n                            <Grid item>\n                                {\" Sample \" + id}\n                                <Typography variant=\"overline\"> \n                                    {item.standardGeneName} / {item.featureName} \n                                </Typography>\n                                <Typography variant=\"caption\" > \n                                    {item.alias}   \n                                </Typography>\n                            </Grid>\n\n                            {/* Show sample edit, publish option if the site is private */}\n                            {\n                                Config.settings.siteAvailability === \"private\" ? (\n                                <Grid item>   \n                                    <Tooltip title=\"Edit Sample\" aria-label=\"Edit Sample\">\n                                        <Link to={\"/edit/\"+ item._id}>\n                                            <EditIcon color=\"primary\"/> \n                                        </Link>                                    \n                                    </Tooltip>                            \n                                    <Tooltip title=\"Publish Sample\" aria-label=\"Publish Sample\">\n                                        {sampleStatus}\n                                    </Tooltip>                                    \n                                </Grid>  \n                                ) : (\n                                    <Grid item>                                       \n                                    </Grid>\n                                    )\n                            \n                            }\n                                                      \n                        </Grid> \n                        </Typography>                       \n                        <Divider/>                        \n                        <br/>\n                            \n                        <Grid container spacing={24} direction=\"column\" justify=\"flex-start\">\n                            {/* Basic Stats Table */}\n                            <Grid item>\n                                <Table className={classes.table}>                                   \n                                    <TableBody >\n                                        {/* Table Header  */}\n                                    <TableRow className={classes.borderLine}>\n                                        <TableCell className={classes.tableHeader} colSpan={3}>\n                                            <Typography variant=\"overline\" gutterBottom className={classes.tableHeader}>\n                                               Meta Information\n                                            </Typography>\n                                        </TableCell>                                        \n                                    </TableRow>\n\n                                        {/* Table Content */}\n                                        <TableRow  className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                                Assay\n                                            </TableCell>\n                                            <TableCell align=\"left\" colSpan={2} className={classes.borderLine}>{item.assayType}</TableCell>\n                                        </TableRow>\n                                        <TableRow  className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                                Run ID\n                                            </TableCell>\n                                            <TableCell align=\"left\" colSpan={2} className={classes.borderLine}>{item.runId}</TableCell>\n                                        </TableRow>\n                                        <TableRow  className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                                Sample ID\n                                            </TableCell>\n                                            <TableCell align=\"left\" colSpan={2} className={classes.borderLine}>{item.sampleId}</TableCell>\n                                        </TableRow>\n                                        <TableRow  className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                                Epitope Tag\n                                            </TableCell>\n                                            <TableCell align=\"left\" colSpan={2} className={classes.borderLine}>{item.epitopeTag}</TableCell>\n                                        </TableRow>\n                                        <TableRow  className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                                Antibody\n                                            </TableCell>\n                                            <TableCell align=\"left\" colSpan={2} className={classes.borderLine}>{item.antibody}</TableCell>\n                                        </TableRow>\n                                        <TableRow className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                                Condition\n                                            </TableCell>\n                                            <TableCell align=\"left\" colSpan={2} className={classes.borderLine}>{item.growthMedia} / {item.treatments}</TableCell>\n                                        </TableRow>\n\n                                       {/* Second Table section */}\n                                        \n                                        <TableRow className={classes.borderLine}>\n                                            <TableCell className={classes.tableHeader} colSpan={3}>\n                                                <Typography variant=\"overline\" gutterBottom className={classes.tableHeader}>\n                                                    General Stats\n                                                </Typography>\n                                            </TableCell>                                        \n                                        </TableRow>\n                                        <TableRow className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                            Total Sequencing Reads\n                                            </TableCell>\n                                            <TableCell align=\"left\" colSpan={2} className={classes.borderLine}>{item.totalReads}</TableCell>\n                                        </TableRow>\n                                        <TableRow className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                            Mapped Read count\n                                            </TableCell>\n                                            <TableCell align=\"left\" className={classes.borderLine}>{item.mappedReads}</TableCell>\n                                            <TableCell align=\"left\" className={classes.borderLine}>{item.mappedReadPercent}</TableCell>\n                                        </TableRow>\n                                        <TableRow className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                            Uniquely Mapped Reads \n                                            </TableCell>\n                                            <TableCell  className={classes.borderLine}>{item.uniquelyMappedReads}</TableCell>\n                                            <TableCell  className={classes.borderLine}>{item.uniquelyMappedPercent}</TableCell>\n                                        </TableRow>\n                                        <TableRow className={classes.borderLine}>\n                                            <TableCell component=\"th\" scope=\"row\">\n                                            DeDuplicated Count \n                                            </TableCell>\n                                            <TableCell  className={classes.borderLine}>{item.dedupUniquelyMappedReads}</TableCell>\n                                            <TableCell  className={classes.borderLine}>{item.deduplicatedPercent}</TableCell>\n                                        </TableRow>\n                                  \n                                    </TableBody>\n                                </Table>\n                            </Grid> \n                        </Grid>\n             \n                </CardContent>\n            </Card>                                 \n        </Grid> \n        )\n    });\n\n    \n    \n    \n    return (\n    \n        <CardContent className={classes.fullList}>\n            <CardActions>\n                <Grid container alignItems={\"center\"} justify={\"space-between\"}>\n                    <Grid item sm={\"auto\"}>\n                        <Tooltip title=\"Go Back\" aria-label=\"Go Back\">\n                            <Button size=\"small\" color=\"primary\" onClick={this.props.handleBack} >\n                                <ArrowBack/>\n                            </Button> \n                        </Tooltip>                                                                            \n                    </Grid>  \n                    <Grid item sm={\"auto\"}>\n                        {/* Add Card Actions here or filter menu  */}\n                    </Grid> \n                                     \n                </Grid>   \n            </CardActions>\n            <Divider/>\n            <Grid container spacing={24} direction=\"row\" justify=\"center\" className={classes.statsContainer}>\n                    {sampleStats}\n            </Grid>\n            \n        </CardContent>\n       \n      \n    );\n  }\n}\n\nSampleStats.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(withSnackbar(SampleStats));\n"]},"metadata":{},"sourceType":"module"}