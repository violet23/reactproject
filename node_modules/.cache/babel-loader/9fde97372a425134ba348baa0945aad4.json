{"ast":null,"code":"import _classCallCheck from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/aishanliu/Desktop/yepfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/aishanliu/Desktop/yepfrontend/src/Components/EditSample.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport TextField from '@material-ui/core/TextField';\nimport CheckIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error'; // retrieve app configuration settings\n\nimport Config from '../Config';\n\nvar styles = function styles(theme) {\n  return {\n    center: {\n      margin: 'auto',\n      maxWidth: 1200,\n      padding: 10 // border: '2px solid green'\n\n    },\n    card: {\n      maxWidth: 1200,\n      padding: 20\n    },\n    leftIcon: {\n      marginRight: theme.spacing.unit // fontSize: 25,\n\n    },\n    navbar: {},\n    button: {\n      marginRight: theme.spacing.unit,\n      marginBottom: 0\n    },\n    instructions: {\n      marginTop: theme.spacing.unit,\n      marginBottom: theme.spacing.unit,\n      textAlign: \"center\"\n    },\n    success: {\n      fontSize: 30,\n      color: \"#43a047\",\n      float: \"left\"\n    },\n    fail: {\n      fontSize: 30,\n      color: \"#dd2c00\",\n      float: \"left\"\n    },\n    updateIcon: {\n      fontSize: 28,\n      marginRight: theme.spacing.unit,\n      float: \"right\"\n    }\n  };\n};\n\nvar EditSample =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditSample, _React$Component);\n\n  function EditSample() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditSample);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditSample)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      changesSubmitted: false,\n      updateStatus: \"\",\n      helperText: \"\",\n      editFields: {\n        alias: '',\n        antibody: '',\n        assayType: '',\n        description: '',\n        epitopeTag: '',\n        featureName: '',\n        genome: '',\n        growthMedia: '',\n        runId: '',\n        sampleId: '',\n        sgdId: '',\n        standardGeneName: '',\n        treatments: ''\n      } // you would access the route parameter here and then maybe fetch stuff\n\n    };\n\n    _this.goBack = function () {\n      _this.props.history.push('/');\n    };\n\n    _this.handleSync = function (editFields) {\n      return function () {\n        // looking up in the entire SGD data\n        var dataURL = Config.settings.apiURL + Config.settings.sgdEndpoint + \"/\" + editFields.standardGeneName;\n        console.log(dataURL);\n        axios.get(dataURL).then(function (res) {\n          // creating an object that will be the fields in the form to edit.\n          var editData = res.data.sgdInfo.map(function (sample) {\n            return {\n              alias: sample.alias,\n              description: sample.description,\n              featureName: sample.featureName,\n              sgdId: sample.sgdId,\n              standardGeneName: sample.standardGeneName,\n              commonName: sample.commonName\n            };\n          }); // changing only relevant values, we don't want to change sampleId\n          // and other crucial information using autosync\n\n          for (var key in editData[0]) {\n            editFields[key] = editData[0][key];\n          }\n\n          console.log(\"sync Data\");\n          console.log(editFields);\n\n          _this.setState({\n            editFields: editFields,\n            helperText: \"\"\n          });\n        }).catch(function (error) {\n          console.log(error);\n\n          _this.setState({\n            helperText: \"Use SGD Standard Names\"\n          });\n        }); // Setting the title of the browser tab\n\n        document.title = \" Edit Sample | YEP\";\n      };\n    };\n\n    _this.handleSubmit = function () {\n      // Submit the values if you dont have any errors\n      if (_this.state.helperText.length > 0) {\n        alert(\"Your errors will be overwritten\");\n      }\n\n      var id = _this.props.match.params.sample_id;\n      var patchURL = Config.settings.apiURL + Config.settings.samplesEndpoint + \"/\" + id;\n      var updateArray = [];\n      var submitData = _this.state.editFields;\n\n      for (var item in submitData) {\n        if (item === \"standardGeneName\") {\n          updateArray.push({\n            \"propName\": item,\n            \"value\": submitData[item].toUpperCase()\n          });\n        } else {\n          updateArray.push({\n            \"propName\": item,\n            \"value\": submitData[item]\n          });\n        }\n      }\n\n      console.log(updateArray);\n      axios.patch(patchURL, updateArray).then(function (res) {\n        console.log(res);\n\n        if (res.statusText === \"OK\") {\n          console.log(\"Sucess\", updateArray);\n\n          _this.setState({\n            changesSubmitted: true,\n            updateStatus: \"OK\"\n          });\n        } else {\n          // wondering when this would happen ?\n          console.log(\"Sample Update Failed\", updateArray);\n\n          _this.setState({\n            changesSubmitted: true,\n            updateStatus: \"Failed\"\n          });\n        }\n      });\n    };\n\n    _this.handleChange = function (property) {\n      return function (event) {\n        //  retrieve the existing object\n        var editFields = _this.state.editFields;\n        editFields[property] = event.target.value; // update the changes to respective fields\n\n        _this.setState({\n          editFields: editFields\n        }); // console.log(this.state.editFields); \n\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(EditSample, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(\"edit sample fetching data\"); // you automatically get the props for class based components.\n      // console.log(this.props);\n\n      var id = this.props.match.params.sample_id;\n      var dataURL = Config.settings.apiURL + Config.settings.samplesEndpoint + '/edit/' + id;\n      axios.get(dataURL).then(function (res) {\n        console.log(\"SampleData\");\n        console.log(res.data.samples[0]); // creating an object that will be the fields in the form to edit.\n\n        var editData = res.data.samples.map(function (sample) {\n          return {\n            alias: sample.alias,\n            antibody: sample.antibody,\n            assayType: sample.assayType,\n            description: sample.description,\n            epitopeTag: sample.epitopeTag,\n            featureName: sample.featureName,\n            genome: sample.genome,\n            growthMedia: sample.growthMedia,\n            runId: sample.runId,\n            sampleId: sample.sampleId,\n            sgdId: sample.sgdId,\n            standardGeneName: sample.standardGeneName,\n            treatments: sample.treatments\n          };\n        });\n\n        _this2.setState({\n          editFields: editData[0]\n        });\n      }); // Setting the title of the browser tab\n\n      document.title = \" Edit Sample | YEP\";\n    } // function using the browser's history props from reactrouter\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      var _this$state = this.state,\n          editFields = _this$state.editFields,\n          helperText = _this$state.helperText;\n      var content = this.state.changesSubmitted ? this.state.updateStatus === \"OK\" ? React.createElement(Typography, {\n        variant: \"h6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \" \", React.createElement(CheckIcon, {\n        className: classes.success,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), \"  Your Changes have been submitted successfully ! \") : React.createElement(Typography, {\n        variant: \"h6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \" \", React.createElement(ErrorIcon, {\n        className: classes.fail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), \" Unable to update the Sample. Please, Contact your Web Developer to resolve the bug ! \") : React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"Sample Editor\"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }), React.createElement(Grid, {\n        container: true,\n        spacing: 16,\n        direction: \"row\",\n        justify: \"flex-start\",\n        className: classes.mainContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"standardGeneName\",\n        label: \"Protein Name\",\n        value: editFields.standardGeneName,\n        onChange: this.handleChange('standardGeneName'),\n        onBlur: this.handleSync(editFields),\n        type: \"text\",\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        error: helperText.length === 0 ? false : true,\n        helperText: helperText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"featureName\",\n        label: \"Feature Name\",\n        value: editFields.featureName,\n        onChange: this.handleChange('featureName'),\n        type: \"text\",\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"Assay\",\n        label: \"Assay Type\",\n        value: editFields.assayType,\n        onChange: this.handleChange('assayType'),\n        type: \"text\",\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"Antibody\",\n        label: \"Antibody\",\n        className: classes.textField,\n        value: editFields.antibody,\n        type: \"text\",\n        onChange: this.handleChange('antibody'),\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"epitopeTag\",\n        label: \"Epitope Tag\",\n        className: classes.textField,\n        value: editFields.epitopeTag,\n        type: \"text\",\n        onChange: this.handleChange('epitopeTag'),\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"genome\",\n        label: \"Genome\",\n        className: classes.textField,\n        value: editFields.genome,\n        type: \"text\",\n        onChange: this.handleChange('genome'),\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"growthMedia\",\n        label: \"Growth Media\",\n        className: classes.textField,\n        value: editFields.growthMedia,\n        type: \"text\",\n        onChange: this.handleChange('growthMedia'),\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"treatments\",\n        label: \"Treatments\",\n        className: classes.textField,\n        value: editFields.treatments,\n        type: \"text\",\n        onChange: this.handleChange('treatments'),\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"runId\",\n        label: \"Run ID\",\n        className: classes.textField,\n        value: editFields.runId,\n        type: \"text\",\n        onChange: this.handleChange('runId'),\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"sampleId\",\n        label: \"Sample ID\",\n        className: classes.textField,\n        value: editFields.sampleId,\n        type: \"text\",\n        onChange: this.handleChange('sampleId'),\n        InputLabelProps: {\n          shrink: true\n        },\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }))), React.createElement(TextField, {\n        id: \"alias\",\n        label: \"Alias\",\n        value: editFields.alias,\n        onChange: this.handleChange('alias'),\n        type: \"text\",\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        },\n        fullWidth: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"description\",\n        label: \"Description\",\n        value: editFields.description,\n        onChange: this.handleChange('description'),\n        type: \"text\",\n        className: classes.textField,\n        InputLabelProps: {\n          shrink: true\n        },\n        fullWidth: true,\n        multiline: true,\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459\n        },\n        __self: this\n      }), React.createElement(CardActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        className: classes.button,\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        className: classes.button,\n        onClick: this.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469\n        },\n        __self: this\n      }, \"Cancel\")));\n      return React.createElement(\"div\", {\n        style: {\n          height: '100vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        elevation: 1,\n        className: classes.navbar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485\n        },\n        __self: this\n      }, React.createElement(CardActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 16,\n        direction: \"row\",\n        wrap: \"nowrap\",\n        justify: \"flex-start\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        sm: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"Go Back\",\n        \"aria-label\": \"Go Back\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"small\",\n        color: \"primary\",\n        onClick: this.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490\n        },\n        __self: this\n      }, React.createElement(ArrowBack, {\n        className: classes.leftIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491\n        },\n        __self: this\n      }))))))), React.createElement(\"div\", {\n        className: classes.center,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: classes.card,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501\n        },\n        __self: this\n      }, content)));\n    }\n  }]);\n\n  return EditSample;\n}(React.Component);\n\nEditSample.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withRouter(withStyles(styles)(EditSample));","map":{"version":3,"sources":["/Users/aishanliu/Desktop/yepfrontend/src/Components/EditSample.js"],"names":["React","axios","PropTypes","withStyles","withRouter","Card","CardActions","CardContent","Button","Typography","Divider","Grid","Paper","Tooltip","ArrowBack","TextField","CheckIcon","ErrorIcon","Config","styles","theme","center","margin","maxWidth","padding","card","leftIcon","marginRight","spacing","unit","navbar","button","marginBottom","instructions","marginTop","textAlign","success","fontSize","color","float","fail","updateIcon","EditSample","state","changesSubmitted","updateStatus","helperText","editFields","alias","antibody","assayType","description","epitopeTag","featureName","genome","growthMedia","runId","sampleId","sgdId","standardGeneName","treatments","goBack","props","history","push","handleSync","dataURL","settings","apiURL","sgdEndpoint","console","log","get","then","res","editData","data","sgdInfo","map","sample","commonName","key","setState","catch","error","document","title","handleSubmit","length","alert","id","match","params","sample_id","patchURL","samplesEndpoint","updateArray","submitData","item","toUpperCase","patch","statusText","handleChange","property","event","target","value","samples","classes","content","mainContainer","textField","shrink","height","Component","propTypes","object","isRequired"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,SAAP,MAAsB,8BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,OAAOC,SAAP,MAAsB,0BAAtB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAGA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AAErBC,IAAAA,MAAM,EAAG;AACLC,MAAAA,MAAM,EAAE,MADH;AAELC,MAAAA,QAAQ,EAAE,IAFL;AAGLC,MAAAA,OAAO,EAAE,EAHJ,CAIL;;AAJK,KAFY;AAQrBC,IAAAA,IAAI,EAAE;AACFF,MAAAA,QAAQ,EAAE,IADR;AAEFC,MAAAA,OAAO,EAAE;AAFP,KARe;AAYnBE,IAAAA,QAAQ,EAAE;AACRC,MAAAA,WAAW,EAAEP,KAAK,CAACQ,OAAN,CAAcC,IADnB,CAER;;AAFQ,KAZS;AAgBnBC,IAAAA,MAAM,EAAC,EAhBY;AAmBnBC,IAAAA,MAAM,EAAE;AACNJ,MAAAA,WAAW,EAAEP,KAAK,CAACQ,OAAN,CAAcC,IADrB;AAENG,MAAAA,YAAY,EAAE;AAFR,KAnBW;AAuBnBC,IAAAA,YAAY,EAAE;AACZC,MAAAA,SAAS,EAAEd,KAAK,CAACQ,OAAN,CAAcC,IADb;AAEZG,MAAAA,YAAY,EAAEZ,KAAK,CAACQ,OAAN,CAAcC,IAFhB;AAGZM,MAAAA,SAAS,EAAE;AAHC,KAvBK;AA4BnBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,QAAQ,EAAE,EADH;AAEPC,MAAAA,KAAK,EAAE,SAFA;AAGPC,MAAAA,KAAK,EAAE;AAHA,KA5BU;AAiCnBC,IAAAA,IAAI,EAAC;AACHH,MAAAA,QAAQ,EAAE,EADP;AAEHC,MAAAA,KAAK,EAAE,SAFJ;AAGHC,MAAAA,KAAK,EAAE;AAHJ,KAjCc;AAsCnBE,IAAAA,UAAU,EAAC;AACTJ,MAAAA,QAAQ,EAAE,EADD;AAETV,MAAAA,WAAW,EAAEP,KAAK,CAACQ,OAAN,CAAcC,IAFlB;AAGTU,MAAAA,KAAK,EAAE;AAHE;AAtCQ,GAAL;AAAA,CAApB;;IA+CMG,U;;;;;;;;;;;;;;;;;UACFC,K,GAAQ;AACJC,MAAAA,gBAAgB,EAAG,KADf;AAEJC,MAAAA,YAAY,EAAG,EAFX;AAGJC,MAAAA,UAAU,EAAE,EAHR;AAIJC,MAAAA,UAAU,EAAE;AACRC,QAAAA,KAAK,EAAG,EADA;AAERC,QAAAA,QAAQ,EAAE,EAFF;AAGRC,QAAAA,SAAS,EAAE,EAHH;AAIRC,QAAAA,WAAW,EAAE,EAJL;AAKRC,QAAAA,UAAU,EAAC,EALH;AAMRC,QAAAA,WAAW,EAAC,EANJ;AAORC,QAAAA,MAAM,EAAC,EAPC;AAQRC,QAAAA,WAAW,EAAC,EARJ;AASRC,QAAAA,KAAK,EAAC,EATE;AAURC,QAAAA,QAAQ,EAAC,EAVD;AAWRC,QAAAA,KAAK,EAAC,EAXE;AAYRC,QAAAA,gBAAgB,EAAG,EAZX;AAaRC,QAAAA,UAAU,EAAC;AAbH,OAJR,CAsBR;;AAtBQ,K;;UAmERC,M,GAAS,YAAM;AACX,YAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH,K;;UAGDC,U,GAAa,UAAClB,UAAD;AAAA,aAAgB,YAAM;AAE/B;AACA,YAAImB,OAAO,GAAGhD,MAAM,CAACiD,QAAP,CAAgBC,MAAhB,GAAyBlD,MAAM,CAACiD,QAAP,CAAgBE,WAAzC,GAAuD,GAAvD,GAA6DtB,UAAU,CAACY,gBAAtF;AACAW,QAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;AAEAjE,QAAAA,KAAK,CAACuE,GAAN,CAAUN,OAAV,EACKO,IADL,CACU,UAAAC,GAAG,EAAG;AAER;AACA,cAAMC,QAAQ,GAAGD,GAAG,CAACE,IAAJ,CAASC,OAAT,CAAiBC,GAAjB,CAAqB,UAAAC,MAAM,EAAI;AAC5C,mBAAO;AACH/B,cAAAA,KAAK,EAAE+B,MAAM,CAAC/B,KADX;AAEHG,cAAAA,WAAW,EAAE4B,MAAM,CAAC5B,WAFjB;AAGHE,cAAAA,WAAW,EAAC0B,MAAM,CAAC1B,WAHhB;AAIHK,cAAAA,KAAK,EAACqB,MAAM,CAACrB,KAJV;AAKHC,cAAAA,gBAAgB,EAAGoB,MAAM,CAACpB,gBALvB;AAMHqB,cAAAA,UAAU,EAACD,MAAM,CAACC;AANf,aAAP;AAQH,WATgB,CAAjB,CAHQ,CAcR;AACA;;AACA,eAAI,IAAIC,GAAR,IAAeN,QAAQ,CAAC,CAAD,CAAvB,EAA2B;AACvB5B,YAAAA,UAAU,CAACkC,GAAD,CAAV,GAAkBN,QAAQ,CAAC,CAAD,CAAR,CAAYM,GAAZ,CAAlB;AACH;;AAEDX,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAYxB,UAAZ;;AAGA,gBAAKmC,QAAL,CAAc;AACVnC,YAAAA,UAAU,EAAEA,UADF;AAEVD,YAAAA,UAAU,EAAE;AAFF,WAAd;AAIH,SA7BL,EA6BOqC,KA7BP,CA6Ba,UAAAC,KAAK,EAAI;AACdd,UAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;;AACA,gBAAKF,QAAL,CAAc;AACVpC,YAAAA,UAAU,EAAE;AADF,WAAd;AAGH,SAlCL,EAN+B,CA0C3B;;AACAuC,QAAAA,QAAQ,CAACC,KAAT,GAAiB,oBAAjB;AACP,OA5CY;AAAA,K;;UA+CbC,Y,GAAe,YAAM;AAEpB;AACC,UAAG,MAAK5C,KAAL,CAAWG,UAAX,CAAsB0C,MAAtB,GAA+B,CAAlC,EAAqC;AACjCC,QAAAA,KAAK,CAAC,iCAAD,CAAL;AACH;;AAEC,UAAIC,EAAE,GAAG,MAAK5B,KAAL,CAAW6B,KAAX,CAAiBC,MAAjB,CAAwBC,SAAjC;AACA,UAAIC,QAAQ,GAAG5E,MAAM,CAACiD,QAAP,CAAgBC,MAAhB,GAAyBlD,MAAM,CAACiD,QAAP,CAAgB4B,eAAzC,GAA2D,GAA3D,GAAgEL,EAA/E;AAEA,UAAIM,WAAW,GAAG,EAAlB;AACA,UAAIC,UAAU,GAAG,MAAKtD,KAAL,CAAWI,UAA5B;;AAEA,WAAK,IAAImD,IAAT,IAAiBD,UAAjB,EAA4B;AACxB,YAAGC,IAAI,KAAK,kBAAZ,EAA+B;AAC3BF,UAAAA,WAAW,CAAChC,IAAZ,CAAiB;AAAC,wBAAYkC,IAAb;AAAkB,qBAAUD,UAAU,CAACC,IAAD,CAAV,CAAiBC,WAAjB;AAA5B,WAAjB;AACH,SAFD,MAGI;AACAH,UAAAA,WAAW,CAAChC,IAAZ,CAAiB;AAAC,wBAAYkC,IAAb;AAAkB,qBAAUD,UAAU,CAACC,IAAD;AAAtC,WAAjB;AACH;AAEJ;;AACD5B,MAAAA,OAAO,CAACC,GAAR,CAAYyB,WAAZ;AAGA/F,MAAAA,KAAK,CAACmG,KAAN,CAAYN,QAAZ,EAAqBE,WAArB,EAAkCvB,IAAlC,CAAuC,UAAAC,GAAG,EAAG;AACzCJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;;AAEA,YAAGA,GAAG,CAAC2B,UAAJ,KAAmB,IAAtB,EAA2B;AACvB/B,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsByB,WAAtB;;AACA,gBAAKd,QAAL,CAAc;AACVtC,YAAAA,gBAAgB,EAAE,IADR;AAEVC,YAAAA,YAAY,EAAE;AAFJ,WAAd;AAIH,SAND,MAOI;AACA;AACAyB,UAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCyB,WAApC;;AACA,gBAAKd,QAAL,CAAc;AACVtC,YAAAA,gBAAgB,EAAE,IADR;AAEVC,YAAAA,YAAY,EAAE;AAFJ,WAAd;AAIH;AACJ,OAlBD;AAsBD,K;;UAEHyD,Y,GAAe,UAAAC,QAAQ;AAAA,aAAI,UAAAC,KAAK,EAAI;AAEhC;AACA,YAAMzD,UAAU,GAAG,MAAKJ,KAAL,CAAWI,UAA9B;AACAA,QAAAA,UAAU,CAACwD,QAAD,CAAV,GAAuBC,KAAK,CAACC,MAAN,CAAaC,KAApC,CAJgC,CAMhC;;AACA,cAAKxB,QAAL,CAAc;AACVnC,UAAAA,UAAU,EAAEA;AADF,SAAd,EAPgC,CAUhC;;AACH,OAXsB;AAAA,K;;;;;;;wCAjJJ;AAAA;;AACfuB,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EADe,CAGf;AACA;;AAEA,UAAImB,EAAE,GAAG,KAAK5B,KAAL,CAAW6B,KAAX,CAAiBC,MAAjB,CAAwBC,SAAjC;AACA,UAAI3B,OAAO,GAAGhD,MAAM,CAACiD,QAAP,CAAgBC,MAAhB,GAAyBlD,MAAM,CAACiD,QAAP,CAAgB4B,eAAzC,GAA2D,QAA3D,GAAsEL,EAApF;AACAzF,MAAAA,KAAK,CAACuE,GAAN,CAAUN,OAAV,EACKO,IADL,CACU,UAAAC,GAAG,EAAG;AACRJ,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACE,IAAJ,CAAS+B,OAAT,CAAiB,CAAjB,CAAZ,EAFQ,CAIR;;AACA,YAAMhC,QAAQ,GAAGD,GAAG,CAACE,IAAJ,CAAS+B,OAAT,CAAiB7B,GAAjB,CAAqB,UAAAC,MAAM,EAAI;AAC5C,iBAAO;AACH/B,YAAAA,KAAK,EAAE+B,MAAM,CAAC/B,KADX;AAEHC,YAAAA,QAAQ,EAAE8B,MAAM,CAAC9B,QAFd;AAGHC,YAAAA,SAAS,EAAE6B,MAAM,CAAC7B,SAHf;AAIHC,YAAAA,WAAW,EAAE4B,MAAM,CAAC5B,WAJjB;AAKHC,YAAAA,UAAU,EAAE2B,MAAM,CAAC3B,UALhB;AAMHC,YAAAA,WAAW,EAAC0B,MAAM,CAAC1B,WANhB;AAOHC,YAAAA,MAAM,EAACyB,MAAM,CAACzB,MAPX;AAQHC,YAAAA,WAAW,EAACwB,MAAM,CAACxB,WARhB;AASHC,YAAAA,KAAK,EAAEuB,MAAM,CAACvB,KATX;AAUHC,YAAAA,QAAQ,EAAEsB,MAAM,CAACtB,QAVd;AAWHC,YAAAA,KAAK,EAACqB,MAAM,CAACrB,KAXV;AAYHC,YAAAA,gBAAgB,EAAGoB,MAAM,CAACpB,gBAZvB;AAaHC,YAAAA,UAAU,EAAEmB,MAAM,CAACnB;AAbhB,WAAP;AAeH,SAhBgB,CAAjB;;AAkBA,QAAA,MAAI,CAACsB,QAAL,CAAc;AACVnC,UAAAA,UAAU,EAAE4B,QAAQ,CAAC,CAAD;AADV,SAAd;AAGH,OA3BL,EARe,CAqCX;;AACAU,MAAAA,QAAQ,CAACC,KAAT,GAAiB,oBAAjB;AAEP,K,CAGD;;;;6BAmHO;AAAA,UACCsB,OADD,GACa,KAAK9C,KADlB,CACC8C,OADD;AAAA,wBAE0B,KAAKjE,KAF/B;AAAA,UAEAI,UAFA,eAEAA,UAFA;AAAA,UAEYD,UAFZ,eAEYA,UAFZ;AAIP,UAAM+D,OAAO,GAAG,KAAKlE,KAAL,CAAWC,gBAAX,GAEZ,KAAKD,KAAL,CAAWE,YAAX,KAA4B,IAA5B,GAAoC,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA0B,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAE+D,OAAO,CAACxE,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1B,uDAApC,GAA2K,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA0B,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEwE,OAAO,CAACpE,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1B,2FAF/J,GAKf,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAyB,QAAA,YAAY,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADH,EAIG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJH,EAKG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALH,EAOG,oBAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAgB,QAAA,OAAO,EAAE,EAAzB;AAA6B,QAAA,SAAS,EAAC,KAAvC;AACI,QAAA,OAAO,EAAC,YADZ;AACyB,QAAA,SAAS,EAAEoE,OAAO,CAACE,aAD5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,kBADP;AAEI,QAAA,KAAK,EAAC,cAFV;AAGI,QAAA,KAAK,EAAE/D,UAAU,CAACY,gBAHtB;AAII,QAAA,QAAQ,EAAE,KAAK2C,YAAL,CAAkB,kBAAlB,CAJd;AAKI,QAAA,MAAM,EAAE,KAAKrC,UAAL,CAAgBlB,UAAhB,CALZ;AAMI,QAAA,IAAI,EAAC,MANT;AAOI,QAAA,SAAS,EAAE6D,OAAO,CAACG,SAPvB;AAQI,QAAA,eAAe,EAAE;AACbC,UAAAA,MAAM,EAAE;AADK,SARrB;AAWI,QAAA,MAAM,EAAC,QAXX;AAYI,QAAA,OAAO,EAAC,UAZZ;AAaI,QAAA,KAAK,EAAElE,UAAU,CAAC0C,MAAX,KAAsB,CAAtB,GAA0B,KAA1B,GAAkC,IAb7C;AAcI,QAAA,UAAU,EAAE1C,UAdhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAFJ,EAoBI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,aADP;AAEI,QAAA,KAAK,EAAC,cAFV;AAGI,QAAA,KAAK,EAAEC,UAAU,CAACM,WAHtB;AAII,QAAA,QAAQ,EAAE,KAAKiD,YAAL,CAAkB,aAAlB,CAJd;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,SAAS,EAAEM,OAAO,CAACG,SANvB;AAOI,QAAA,eAAe,EAAE;AACbC,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CApBJ,EAmCI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,OADP;AAEI,QAAA,KAAK,EAAC,YAFV;AAGI,QAAA,KAAK,EAAEjE,UAAU,CAACG,SAHtB;AAII,QAAA,QAAQ,EAAE,KAAKoD,YAAL,CAAkB,WAAlB,CAJd;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,SAAS,EAAEM,OAAO,CAACG,SANvB;AAOI,QAAA,eAAe,EAAE;AACbC,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAnCJ,EAkDI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,UADP;AAEI,QAAA,KAAK,EAAC,UAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAACG,SAHvB;AAII,QAAA,KAAK,EAAEhE,UAAU,CAACE,QAJtB;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,QAAQ,EAAE,KAAKqD,YAAL,CAAkB,UAAlB,CANd;AAOI,QAAA,eAAe,EAAE;AACbU,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAlDJ,EAiEI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,YADP;AAEI,QAAA,KAAK,EAAC,aAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAACG,SAHvB;AAII,QAAA,KAAK,EAAEhE,UAAU,CAACK,UAJtB;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,QAAQ,EAAE,KAAKkD,YAAL,CAAkB,YAAlB,CANd;AAOI,QAAA,eAAe,EAAE;AACbU,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAjEJ,EAgFI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,QADP;AAEI,QAAA,KAAK,EAAC,QAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAACG,SAHvB;AAII,QAAA,KAAK,EAAEhE,UAAU,CAACO,MAJtB;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,QAAQ,EAAE,KAAKgD,YAAL,CAAkB,QAAlB,CANd;AAOI,QAAA,eAAe,EAAE;AACbU,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAhFJ,EA+FI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,aADP;AAEI,QAAA,KAAK,EAAC,cAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAACG,SAHvB;AAII,QAAA,KAAK,EAAEhE,UAAU,CAACQ,WAJtB;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,QAAQ,EAAE,KAAK+C,YAAL,CAAkB,aAAlB,CANd;AAOI,QAAA,eAAe,EAAE;AACbU,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CA/FJ,EA8GI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,YADP;AAEI,QAAA,KAAK,EAAC,YAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAACG,SAHvB;AAII,QAAA,KAAK,EAAEhE,UAAU,CAACa,UAJtB;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,QAAQ,EAAE,KAAK0C,YAAL,CAAkB,YAAlB,CANd;AAOI,QAAA,eAAe,EAAE;AACbU,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CA9GJ,EA6HI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,OADP;AAEI,QAAA,KAAK,EAAC,QAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAACG,SAHvB;AAII,QAAA,KAAK,EAAEhE,UAAU,CAACS,KAJtB;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,QAAQ,EAAE,KAAK8C,YAAL,CAAkB,OAAlB,CANd;AAOI,QAAA,eAAe,EAAE;AACbU,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CA7HJ,EA4II,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,UADP;AAEI,QAAA,KAAK,EAAC,WAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAACG,SAHvB;AAII,QAAA,KAAK,EAAEhE,UAAU,CAACU,QAJtB;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,QAAQ,EAAE,KAAK6C,YAAL,CAAkB,UAAlB,CANd;AAOI,QAAA,eAAe,EAAE;AACbU,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,MAAM,EAAC,QAVX;AAWI,QAAA,OAAO,EAAC,UAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CA5IJ,CAPH,EAoKG,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,OADP;AAEI,QAAA,KAAK,EAAC,OAFV;AAGI,QAAA,KAAK,EAAEjE,UAAU,CAACC,KAHtB;AAII,QAAA,QAAQ,EAAE,KAAKsD,YAAL,CAAkB,OAAlB,CAJd;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,SAAS,EAAEM,OAAO,CAACG,SANvB;AAOI,QAAA,eAAe,EAAE;AACbC,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,SAAS,MAVb;AAWI,QAAA,MAAM,EAAC,QAXX;AAYI,QAAA,OAAO,EAAC,UAZZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApKH,EAmLG,oBAAC,SAAD;AACI,QAAA,EAAE,EAAC,aADP;AAEI,QAAA,KAAK,EAAC,aAFV;AAGI,QAAA,KAAK,EAAEjE,UAAU,CAACI,WAHtB;AAII,QAAA,QAAQ,EAAE,KAAKmD,YAAL,CAAkB,aAAlB,CAJd;AAKI,QAAA,IAAI,EAAC,MALT;AAMI,QAAA,SAAS,EAAEM,OAAO,CAACG,SANvB;AAOI,QAAA,eAAe,EAAE;AACbC,UAAAA,MAAM,EAAE;AADK,SAPrB;AAUI,QAAA,SAAS,MAVb;AAWI,QAAA,SAAS,MAXb;AAYI,QAAA,MAAM,EAAC,QAZX;AAaI,QAAA,OAAO,EAAC,UAbZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnLH,EAkMG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlMH,EAmMG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnMH,EAoMG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApMH,EAqMG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QArMH,EAsMG,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AACI,QAAA,OAAO,EAAC,WADZ;AAEI,QAAA,KAAK,EAAC,SAFV;AAGI,QAAA,SAAS,EAAEJ,OAAO,CAAC7E,MAHvB;AAII,QAAA,OAAO,EAAE,KAAKwD,YAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EASI,oBAAC,MAAD;AACI,QAAA,OAAO,EAAC,WADZ;AAEI,QAAA,KAAK,EAAC,WAFV;AAGI,QAAA,SAAS,EAAEqB,OAAO,CAAC7E,MAHvB;AAII,QAAA,OAAO,EAAE,KAAK8B,MAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ,CAtMH,CALD;AAgOE,aACM;AAAK,QAAA,KAAK,EAAE;AAAEoD,UAAAA,MAAM,EAAC;AAAT,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAGI,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAE,CAAlB;AAAqB,QAAA,SAAS,EAAEL,OAAO,CAAC9E,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAgB,QAAA,OAAO,EAAE,EAAzB;AAA6B,QAAA,SAAS,EAAC,KAAvC;AAA6C,QAAA,IAAI,EAAC,QAAlD;AAA4D,QAAA,OAAO,EAAC,YAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAC,SAAf;AAAyB,sBAAW,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,OAAb;AAAqB,QAAA,KAAK,EAAC,SAA3B;AAAqC,QAAA,OAAO,EAAE,KAAK+B,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAE+C,OAAO,CAAClF,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,CADJ,CADJ,CADJ,CADJ,CAHJ,EAkBI;AAAK,QAAA,SAAS,EAAEkF,OAAO,CAACvF,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAEuF,OAAO,CAACnF,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACIoF,OADJ,CADJ,CAlBJ,CADN;AA0BH;;;;EApbsB7G,KAAK,CAACkH,S;;AAyb/BxE,UAAU,CAACyE,SAAX,GAAuB;AACrBP,EAAAA,OAAO,EAAE1G,SAAS,CAACkH,MAAV,CAAiBC;AADL,CAAvB;AAIA,eAAejH,UAAU,CAACD,UAAU,CAACgB,MAAD,CAAV,CAAmBuB,UAAnB,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport TextField from '@material-ui/core/TextField';\nimport CheckIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\n\n// retrieve app configuration settings\nimport Config from '../Config';\n\n\nconst styles = theme => ({\n          \n    center : {\n        margin: 'auto',      \n        maxWidth: 1200,\n        padding: 10,\n        // border: '2px solid green'\n      },\n    card: {\n        maxWidth: 1200,\n        padding: 20\n    },           \n      leftIcon: {\n        marginRight: theme.spacing.unit,\n        // fontSize: 25,\n      },  \n      navbar:{\n        \n      },\n      button: {\n        marginRight: theme.spacing.unit,\n        marginBottom: 0,       \n      },\n      instructions: {\n        marginTop: theme.spacing.unit,\n        marginBottom: theme.spacing.unit,\n        textAlign: \"center\"\n      },\n      success :{\n        fontSize: 30,\n        color: \"#43a047\",       \n        float: \"left\"\n      },\n      fail:{\n        fontSize: 30,\n        color: \"#dd2c00\",      \n        float: \"left\"\n      },\n      updateIcon:{\n        fontSize: 28,\n        marginRight: theme.spacing.unit,\n        float: \"right\"\n      } \n    \n});\n\n\nclass EditSample extends React.Component {\n    state = {\n        changesSubmitted : false,\n        updateStatus : \"\",\n        helperText: \"\",\n        editFields: {\n            alias : '',\n            antibody: '',\n            assayType: '',\n            description: '',\n            epitopeTag:'' ,\n            featureName:'',\n            genome:'',\n            growthMedia:'',\n            runId:'',\n            sampleId:'', \n            sgdId:'',\n            standardGeneName : '',\n            treatments:'',\n        },\n        \n    }\n\n    // you would access the route parameter here and then maybe fetch stuff\n    componentDidMount(){\n        console.log(\"edit sample fetching data\");\n        \n        // you automatically get the props for class based components.\n        // console.log(this.props);\n        \n        let id = this.props.match.params.sample_id;\n        let dataURL = Config.settings.apiURL + Config.settings.samplesEndpoint + '/edit/' + id\n        axios.get(dataURL)\n            .then(res =>{\n                console.log(\"SampleData\");                \n                console.log(res.data.samples[0]);\n\n                // creating an object that will be the fields in the form to edit.\n                const editData = res.data.samples.map(sample => {\n                    return {\n                        alias :sample.alias,\n                        antibody: sample.antibody,\n                        assayType: sample.assayType,\n                        description: sample.description,\n                        epitopeTag: sample.epitopeTag,\n                        featureName:sample.featureName,\n                        genome:sample.genome,\n                        growthMedia:sample.growthMedia,                        \n                        runId: sample.runId,\n                        sampleId: sample.sampleId,\n                        sgdId:sample.sgdId,\n                        standardGeneName : sample.standardGeneName,\n                        treatments: sample.treatments,\n                    }\n                });\n\n                this.setState({\n                    editFields: editData[0]\n                });    \n            }) \n\n            // Setting the title of the browser tab\n            document.title = \" Edit Sample | YEP\"\n           \n    }\n\n        \n    // function using the browser's history props from reactrouter\n    goBack = () => {\n        this.props.history.push('/');\n    }\n\n    // handle sync data based on Protein name, only works if it is a standard Genename\n    handleSync = (editFields) => () => {\n\n        // looking up in the entire SGD data\n        let dataURL = Config.settings.apiURL + Config.settings.sgdEndpoint + \"/\" + editFields.standardGeneName\n        console.log(dataURL);\n        \n        axios.get(dataURL)\n            .then(res =>{\n               \n                // creating an object that will be the fields in the form to edit.\n                const editData = res.data.sgdInfo.map(sample => {\n                    return {\n                        alias :sample.alias, \n                        description: sample.description,                        \n                        featureName:sample.featureName,                        \n                        sgdId:sample.sgdId,\n                        standardGeneName : sample.standardGeneName,\n                        commonName:sample.commonName                      \n                    }\n                });\n\n                // changing only relevant values, we don't want to change sampleId\n                // and other crucial information using autosync\n                for(var key in editData[0]){\n                    editFields[key] = editData[0][key]\n                }\n                \n                console.log(\"sync Data\");\n                console.log(editFields);\n                \n                \n                this.setState({\n                    editFields: editFields,\n                    helperText: \"\"\n                });    \n            }).catch(error => {\n                console.log(error);\n                this.setState({\n                    helperText: \"Use SGD Standard Names\"\n                });              \n            }) \n\n            // Setting the title of the browser tab\n            document.title = \" Edit Sample | YEP\"\n    }\n\n\n    handleSubmit = () => {\n    \n     // Submit the values if you dont have any errors\n      if(this.state.helperText.length > 0 ){\n          alert(\"Your errors will be overwritten\");\n      }      \n\n        let id = this.props.match.params.sample_id;\n        var patchURL = Config.settings.apiURL + Config.settings.samplesEndpoint + \"/\" +id;\n\n        var updateArray = []       \n        let submitData = this.state.editFields;\n\n        for (var item in submitData){\n            if(item === \"standardGeneName\"){\n                updateArray.push({\"propName\": item,\"value\" : submitData[item].toUpperCase()})\n            }\n            else{\n                updateArray.push({\"propName\": item,\"value\" : submitData[item]})\n            }\n            \n        }\n        console.log(updateArray);\n        \n\n        axios.patch(patchURL,updateArray).then(res =>{\n            console.log(res);\n                    \n            if(res.statusText === \"OK\"){\n                console.log(\"Sucess\", updateArray);\n                this.setState({\n                    changesSubmitted: true,\n                    updateStatus: \"OK\"\n                });\n            }\n            else{\n                // wondering when this would happen ?\n                console.log(\"Sample Update Failed\", updateArray); \n                this.setState({\n                    changesSubmitted: true,\n                    updateStatus: \"Failed\"\n                });                                             \n            }         \n        })\n      \n\n                \n      }\n\n    handleChange = property => event => {\n        \n        //  retrieve the existing object\n        const editFields = this.state.editFields;\n        editFields[property] = event.target.value;\n        \n        // update the changes to respective fields\n        this.setState({\n            editFields: editFields\n        });\n        // console.log(this.state.editFields); \n    };\n\n  render() {\n    const { classes } = this.props;\n    const {editFields, helperText} = this.state;\n    \n    const content = this.state.changesSubmitted ? \n    \n        this.state.updateStatus === \"OK\" ?  <Typography variant=\"h6\"> <CheckIcon className={classes.success}/>  Your Changes have been submitted successfully ! </Typography> :    <Typography variant=\"h6\"> <ErrorIcon className={classes.fail}/> Unable to update the Sample. Please, Contact your Web Developer to resolve the bug ! </Typography>\n    : \n\n     <CardContent>                        \n        <Typography variant='h5' gutterBottom>\n            Sample Editor\n        </Typography>                            \n        <Divider/>\n        <br/>        \n        \n        <Grid container spacing={16} direction=\"row\" \n            justify=\"flex-start\" className={classes.mainContainer}> \n            <Grid item>\n                <TextField   \n                    id=\"standardGeneName\"                 \n                    label=\"Protein Name\"                   \n                    value={editFields.standardGeneName}\n                    onChange={this.handleChange('standardGeneName')}\n                    onBlur={this.handleSync(editFields)} \n                    type=\"text\"\n                    className={classes.textField}\n                    InputLabelProps={{\n                        shrink: true,\n                    }}\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    error={helperText.length === 0 ? false : true }\n                    helperText={helperText}\n                    />  \n            </Grid>\n            <Grid item>\n                <TextField   \n                    id=\"featureName\"                 \n                    label=\"Feature Name\"                   \n                    value={editFields.featureName}\n                    onChange={this.handleChange('featureName')} \n                    type=\"text\"\n                    className={classes.textField}\n                    InputLabelProps={{\n                        shrink: true,\n                    }}\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    />  \n            </Grid>\n            <Grid item>\n                <TextField   \n                    id=\"Assay\"                 \n                    label=\"Assay Type\"                   \n                    value={editFields.assayType}\n                    onChange={this.handleChange('assayType')} \n                    type=\"text\"\n                    className={classes.textField}\n                    InputLabelProps={{\n                        shrink: true,\n                    }}\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    />  \n            </Grid>                \n            <Grid item>\n                <TextField\n                    id=\"Antibody\"                 \n                    label=\"Antibody\"\n                    className={classes.textField}\n                    value={editFields.antibody}\n                    type=\"text\"\n                    onChange={this.handleChange('antibody')} \n                    InputLabelProps={{\n                        shrink: true,\n                    }} \n                    margin=\"normal\"        \n                    variant=\"outlined\"\n                    />\n            </Grid> \n            <Grid item>\n                <TextField\n                    id=\"epitopeTag\"                 \n                    label=\"Epitope Tag\"\n                    className={classes.textField}\n                    value={editFields.epitopeTag}\n                    type=\"text\"\n                    onChange={this.handleChange('epitopeTag')} \n                    InputLabelProps={{\n                        shrink: true,\n                    }} \n                    margin=\"normal\"        \n                    variant=\"outlined\"\n                    />\n            </Grid>  \n            <Grid item>\n                <TextField\n                    id=\"genome\"                 \n                    label=\"Genome\"\n                    className={classes.textField}\n                    value={editFields.genome}\n                    type=\"text\"\n                    onChange={this.handleChange('genome')} \n                    InputLabelProps={{\n                        shrink: true,\n                    }} \n                    margin=\"normal\"        \n                    variant=\"outlined\"\n                    />\n            </Grid> \n            <Grid item>\n                <TextField\n                    id=\"growthMedia\"                 \n                    label=\"Growth Media\"\n                    className={classes.textField}\n                    value={editFields.growthMedia}\n                    type=\"text\"\n                    onChange={this.handleChange('growthMedia')} \n                    InputLabelProps={{\n                        shrink: true,\n                    }} \n                    margin=\"normal\"        \n                    variant=\"outlined\"\n                    />\n            </Grid>  \n            <Grid item>\n                <TextField\n                    id=\"treatments\"                 \n                    label=\"Treatments\"\n                    className={classes.textField}\n                    value={editFields.treatments}\n                    type=\"text\"\n                    onChange={this.handleChange('treatments')} \n                    InputLabelProps={{\n                        shrink: true,\n                    }} \n                    margin=\"normal\"        \n                    variant=\"outlined\"\n                    />\n            </Grid>  \n            <Grid item>\n                <TextField\n                    id=\"runId\"                 \n                    label=\"Run ID\"\n                    className={classes.textField}\n                    value={editFields.runId}\n                    type=\"text\"\n                    onChange={this.handleChange('runId')} \n                    InputLabelProps={{\n                        shrink: true,\n                    }} \n                    margin=\"normal\"        \n                    variant=\"outlined\"\n                    />\n            </Grid>  \n            <Grid item>\n                <TextField\n                    id=\"sampleId\"                 \n                    label=\"Sample ID\"\n                    className={classes.textField}\n                    value={editFields.sampleId}\n                    type=\"text\"\n                    onChange={this.handleChange('sampleId')} \n                    InputLabelProps={{\n                        shrink: true,\n                    }} \n                    margin=\"normal\"        \n                    variant=\"outlined\"\n                    />\n            </Grid>                                               \n        </Grid> \n\n        <TextField   \n            id=\"alias\"                 \n            label=\"Alias\"                   \n            value={editFields.alias}\n            onChange={this.handleChange('alias')} \n            type=\"text\"\n            className={classes.textField}\n            InputLabelProps={{\n                shrink: true,\n            }}\n            fullWidth\n            margin=\"normal\"\n            variant=\"outlined\"\n            />  \n\n        <TextField   \n            id=\"description\"                 \n            label=\"Description\"                   \n            value={editFields.description}\n            onChange={this.handleChange('description')} \n            type=\"text\"\n            className={classes.textField}\n            InputLabelProps={{\n                shrink: true,\n            }}\n            fullWidth\n            multiline\n            margin=\"normal\"\n            variant=\"outlined\"\n            /> \n        <br/>\n        <br/>\n        <Divider/> \n        <br/>\n        <CardActions>            \n            <Button\n                variant=\"contained\"\n                color=\"primary\"                        \n                className={classes.button}\n                onClick={this.handleSubmit}\n                >\n                Submit\n            </Button>\n            <Button\n                variant=\"contained\"\n                color=\"secondary\"                        \n                className={classes.button}\n                onClick={this.goBack}\n                >\n                Cancel\n            </Button>\n        </CardActions>        \n    </CardContent>                    \n\n\n      return (\n            <div style={{ height:'100vh'}}>  \n                \n                {/* Navbar */}\n                <Paper elevation={1} className={classes.navbar}>\n                    <CardActions>                        \n                        <Grid container spacing={16} direction=\"row\" wrap=\"nowrap\"  justify=\"flex-start\">\n                            <Grid item sm={\"auto\"}>\n                                <Tooltip title=\"Go Back\" aria-label=\"Go Back\">\n                                    <Button size=\"small\" color=\"primary\" onClick={this.goBack}>\n                                        <ArrowBack className={classes.leftIcon}/>\n                                    </Button> \n                                </Tooltip>       \n                            </Grid>        \n                        </Grid>   \n                    </CardActions>\n                </Paper>\n                \n               {/* Edit Form */}\n                <div className={classes.center}>                    \n                    <Card className={classes.card}>\n                       {content} \n                    </Card>  \n                </div>\n            </div>\n      )\n  }\n\n  \n}\n\nEditSample.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withRouter(withStyles(styles)(EditSample));\n"]},"metadata":{},"sourceType":"module"}